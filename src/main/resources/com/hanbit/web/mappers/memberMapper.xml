<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hanbit.web.mappers.MemberMapper">
<insert id="insert" parameterType="com.hanbit.web.domains.MemberDTO" statementType="CALLABLE">
{CALL jundev.insert_student(
	#{id},#{pw},#{name},#{gender},#{regDate},#{ssn},#{email},#{profileImg},#{role},#{phone},#{majorSeq}
)}
</insert>
<delete id="delete" parameterType="com.hanbit.web.domains.MemberDTO" statementType="CALLABLE">
{CALL jundev.delete_student(
	#{id}
)}
</delete>
<update id="update" parameterType="com.hanbit.web.domains.MemberDTO" statementType="CALLABLE">
{CALL jundev.update_student(
	#{id},#{pw},#{phone},#{email}
)}
</update>
<select id="list" parameterType="com.hanbit.web.domains.Command" resultType="com.hanbit.web.domains.MemberDTO">
select t2.* from(select rownum seq,t.* from(select 
m.mem_id id,
m.name name,
m.gender gender,
m.reg_date regDate,
m.ssn ssn,
m.email email,
m.profile_img profileImg,
m.role role,
m.phone phone,
m.major_seq majorSeq 
from Member m order by reg_date desc) t)t2
where t2.seq between #{start} and #{end}
order by t2.seq asc
</select>
<select id="findOne" parameterType="com.hanbit.web.domains.Command" resultType="com.hanbit.web.domains.MemberDTO">
select 
mem_id as id,
pw as pw,
name as name,
gender as gender,
reg_date as regDate,
email as email,
profile_img as profileImg,
role as role,
ssn as ssn,
phone as phone,
major_seq as major_seq
from member where ${option} = #{keyword}
</select>
<select id="count" statementType="CALLABLE" parameterType="com.hanbit.web.domains.Retval">
	{ call jundev.count_student(
		#{count, mode=OUT, jdbcType=NUMERIC}
	)}
</select>
<select id="find" parameterType="com.hanbit.web.domains.Command" resultType="com.hanbit.web.domains.MemberDTO">
select * from Member where ${keyField} = #{keyword}
</select>
</mapper>